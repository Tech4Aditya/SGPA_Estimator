<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SGPA & CGPA Calculator | JIIT x Aditya Pandey</title>
    <link rel="icon" type="image/png" href="https://github.com/Tech4Aditya/Virtual-Physics-Lab/blob/main/Logo-jiit%20(1).png?raw=true">
    
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0d111c;
            color: #d1d5db;
            background-image: linear-gradient(270deg, #0d111c, #1f2937, #0d111c, #1f2937);
            background-size: 400% 400%;
            animation: gradientMove 30s ease infinite;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subject-card {
            background-color: #1f2937;
            box-shadow: 0 4px 10px -2px rgba(255, 255, 255, 0.08);
            border: 1px solid #374151;
            transition: transform 0.2s, box-shadow 0.3s;
        }
        .subject-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.4);
        }
        input {
            background-color: #374151 !important;
            border: 1px solid #4b5563 !important;
            color: #d1d5db !important;
        }
        input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; }
        
        .cross-glow {
            animation: color-cycle 4s infinite alternate, pulse 1.5s infinite alternate;
        }
        
        @keyframes pulse { from { opacity: 0.7; } to { opacity: 1; } }
        
        @keyframes color-cycle {
            0%   { color: #ef4444; text-shadow: 0 0 8px #ef4444; }
            50%  { color: #f97316; text-shadow: 0 0 8px #f97316; }
            100% { color: #10b981; text-shadow: 0 0 8px #10b981; }
        }

        .red-glow {
            box-shadow: 0 0 15px 5px rgba(239, 68, 68, 0.4) !important;
        }

        .tab-button.active {
            border-bottom: 2px solid #6366f1;
            background-color: #374151;
            color: #e0e7ff;
        }

        .glass {
            background: rgba(31, 41, 55, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

    <div class="max-w-4xl mx-auto">
        
        <!-- Top Controls: Semester Select -->
        <div class="flex justify-between items-center mb-6">
            <div class="flex items-center space-x-3">
                <div class="relative">
                    <select id="sem-select" class="bg-gray-700 text-gray-200 border border-gray-600 rounded-lg p-2 text-sm shadow-md cursor-pointer" onchange="changeSemester(this.value)">
                        <option value="1">Semester 1</option>
                        <option value="2">Semester 2</option>
                        <option value="3" disabled>Semester 3 ðŸ”’</option>
                        <option value="4" disabled>Semester 4 ðŸ”’</option>
                        <option value="5" disabled>Semester 5 ðŸ”’</option>
                        <option value="6" disabled>Semester 6 ðŸ”’</option>
                        <option value="7" disabled>Semester 7 ðŸ”’</option>
                        <option value="8" disabled>Semester 8 ðŸ”’</option>
                    </select>
                </div>
                <!-- Manual Entry Option -->
                <div class="hidden sm:flex items-center space-x-2 glass px-3 py-1.5 rounded-lg border border-gray-600">
                    <label class="text-[10px] uppercase font-bold text-gray-400">Manual SGPA</label>
                    <input id="manual-sgpa" type="text" placeholder="e.g. 8.5" 
                        class="w-16 h-7 bg-transparent border-none text-center text-sm font-bold text-blue-400 focus:ring-0"
                        oninput="saveManualSGPA(this.value, 'manual-sgpa')">
                </div>
            </div>
            <div class="text-xs text-gray-500 uppercase tracking-widest font-bold">JIIT Academic Portal</div>
        </div>

        <header class="text-center mb-10 p-6 bg-gray-800 rounded-xl shadow-2xl transition duration-300">
            <div class="flex items-center justify-center space-x-4 mb-6">
                <img src="https://github.com/Tech4Aditya/Virtual-Physics-Lab/blob/main/adityapandey.jpg?raw=true" class="red-glow h-16 w-16 md:h-20 md:w-20 rounded-full object-cover border-4 border-red-500 shadow-lg" alt="Aditya Pandey">
                <i class="fa-solid fa-xmark text-4xl cross-glow"></i>
                <img src="https://github.com/Tech4Aditya/Virtual-Physics-Lab/blob/main/Logo-jiit%20(1).png?raw=true" class="h-16 w-16 md:h-20 md:w-20 object-contain rounded-full bg-white p-1 border-4 border-blue-500 shadow-lg" alt="JIIT">
            </div>
            <h1 class="text-3xl md:text-4xl font-extrabold text-blue-400">SGPA & CGPA Tracker</h1>
            <p id="header-subtitle" class="text-gray-400 mt-2 text-lg">Currently viewing Semester 1</p>
        </header>

        <!-- Grade Scale Manager -->
        <div class="mb-8">
            <button onclick="toggleGradeScalePanel()" class="w-full bg-indigo-600 text-white font-semibold py-3 px-4 rounded-lg shadow-md hover:bg-indigo-700 transition flex justify-between items-center">
                <span>Grade Scale Manager (Define A, B, C)</span>
                <span id="toggle-icon-panel">â–¼</span>
            </button>

            <div id="grade-scale-panel" class="mt-4 p-0 bg-gray-800 rounded-xl border border-indigo-700 hidden transition duration-300">
                <div class="flex border-b border-indigo-700">
                    <button class="tab-button active flex-1 p-3 text-sm font-semibold" data-scale-id="DEFAULT" onclick="showScale('DEFAULT')">Scale A</button>
                    <button class="tab-button flex-1 p-3 text-sm font-semibold" data-scale-id="ALT1" onclick="showScale('ALT1')">Scale B</button>
                    <button class="tab-button flex-1 p-3 text-sm font-semibold" data-scale-id="ALT2" onclick="showScale('ALT2')">Scale C</button>
                </div>

                <div id="scale-content" class="p-6">
                    <p class="font-semibold text-gray-300 mb-4 text-sm">Set Minimum Marks Required (Max 100):</p>
                    <div id="scale-inputs" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4"></div>
                    <div class="mt-6 flex justify-between">
                        <button onclick="saveCurrentScaleName()" class="bg-gray-700 text-white py-2 px-4 rounded-md text-sm hover:bg-gray-600">Rename Scale</button>
                        <button onclick="resetCurrentScale()" class="bg-red-500 text-white py-2 px-4 rounded-md text-sm hover:bg-red-600">Reset Scale</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Manual Input -->
        <div class="sm:hidden mb-6 flex items-center justify-between glass p-3 rounded-lg border border-gray-600">
            <label class="text-xs uppercase font-bold text-gray-400">Manual SGPA Entry</label>
            <input id="manual-sgpa-mobile" type="text" placeholder="0.00" 
                class="w-20 h-8 rounded bg-gray-900 border-gray-600 text-center text-sm font-bold text-blue-400"
                oninput="saveManualSGPA(this.value, 'manual-sgpa-mobile')">
        </div>

        <!-- Subject Cards Container -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-10" id="subjects-container"></div>

        <!-- Result Panels -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-gradient-to-r from-blue-600 to-indigo-700 p-6 rounded-xl shadow-2xl text-white text-center relative overflow-hidden">
                <div id="override-badge" class="hidden absolute top-2 right-2 bg-yellow-400 text-black text-[10px] font-black px-2 py-0.5 rounded shadow-lg uppercase">Manual</div>
                <p class="text-sm font-bold uppercase tracking-wider opacity-80 mb-1">Sem <span id="res-sem-num">1</span> SGPA</p>
                <div id="sgpa-result" class="text-5xl font-black">0.00</div>
                <p id="sgpa-summary" class="mt-3 text-sm font-medium">Enter marks to begin</p>
            </div>
            <div class="bg-gradient-to-r from-emerald-600 to-teal-700 p-6 rounded-xl shadow-2xl text-white text-center">
                <p class="text-sm font-bold uppercase tracking-wider opacity-80 mb-1">Overall CGPA</p>
                <div id="cgpa-result" class="text-5xl font-black">0.00</div>
                <p id="cgpa-summary" class="mt-3 text-lg font-medium">Loading...</p>
            </div>
        </div>
    </div>

    <script>
        const DEFAULT_CUTOFFS = { 10: 80, 9: 70, 8: 65, 7: 60, 6: 55, 5: 50, 4: 40 };
        const DATA_BY_SEM = {
            1: [
                { id: "sdf1", name: "SDF-1", credits: 4, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-amber-400', bCol:'border-amber-400' },
                { id: "phy1", name: "Physics-1", credits: 4, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-cyan-400', bCol:'border-cyan-400' },
                { id: "math1", name: "Maths-1", credits: 4, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-fuchsia-400', bCol:'border-fuchsia-400' },
                { id: "bel1", name: "BEL-1", credits: 4, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-emerald-400', bCol:'border-emerald-400' },
                { id: "eng", name: "English", credits: 1.5, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-slate-400', bCol:'border-slate-500' },
                { id: "edd", name: "EDD Lab", credits: 1.5, components: [{t:'Mid',m:20,k:'m'},{t:'End',m:20,k:'e'},{t:'TA',m:60,k:'t'}], tCol:'text-purple-400', bCol:'border-purple-400' },
                { id: "sdfl1", name: "SDF LAB", credits: 1, components: [{t:'Mid',m:20,k:'m'},{t:'End',m:20,k:'e'},{t:'TA',m:60,k:'t'}], tCol:'text-amber-500', bCol:'border-amber-500' },
                { id: "bell1", name: "BEL LAB", credits: 1, components: [{t:'Mid',m:20,k:'m'},{t:'End',m:20,k:'e'},{t:'TA',m:60,k:'t'}], tCol:'text-emerald-500', bCol:'border-emerald-500' },
                { id: "phyl1", name: "Physics Lab", credits: 1, components: [{t:'Mid',m:20,k:'m'},{t:'End',m:20,k:'e'},{t:'TA',m:60,k:'t'}], tCol:'text-cyan-500', bCol:'border-cyan-500' }
            ],
            2: [
                { id: "sdf2", name: "SDF-2", credits: 4, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-amber-400', bCol:'border-amber-400' },
                { id: "phy2", name: "Physics-2", credits: 4, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-cyan-400', bCol:'border-cyan-400' },
                { id: "math2", name: "Maths-2", credits: 4, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-fuchsia-400', bCol:'border-fuchsia-400' },
                { id: "lsdc", name: "LSDC", credits: 1, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-sky-400', bCol:'border-sky-400' },
                { id: "uhv", name: "UHV", credits: 3, components: [{t:'Mid',m:30,k:'m'},{t:'End',m:40,k:'e'},{t:'TA',m:30,k:'t'}], tCol:'text-rose-400', bCol:'border-rose-400' },
                { id: "wrk", name: "Workshop", credits: 1.5, components: [{t:'Mid',m:20,k:'m'},{t:'End',m:20,k:'e'},{t:'TA',m:60,k:'t'}], tCol:'text-orange-400', bCol:'border-orange-400' },
                { id: "sdfl2", name: "SDF Lab-2", credits: 1, components: [{t:'Mid',m:20,k:'m'},{t:'End',m:20,k:'e'},{t:'TA',m:60,k:'t'}], tCol:'text-amber-500', bCol:'border-amber-500' }
            ]
        };

        let currentSem = 1;
        let namedScales = {};
        let scaleMapsBySem = {};
        let manualSGPABySem = {};
        let currentEditingScaleId = 'DEFAULT';
        const SCALE_SLOTS = ['DEFAULT', 'ALT1', 'ALT2'];

        function changeSemester(val) {
            currentSem = parseInt(val);
            document.getElementById('header-subtitle').textContent = `Currently viewing Semester ${currentSem}`;
            document.getElementById('res-sem-num').textContent = currentSem;
            
            const manualVal = manualSGPABySem[currentSem] || '';
            document.getElementById('manual-sgpa').value = manualVal;
            document.getElementById('manual-sgpa-mobile').value = manualVal;

            renderSubjectCards();
        }

        function loadStorage() {
            const s = localStorage.getItem('sgpaNamedGradeScales');
            namedScales = s ? JSON.parse(s) : { 
                DEFAULT: { n:'Scale A', c:{...DEFAULT_CUTOFFS} }, 
                ALT1: { n:'Scale B', c:{...DEFAULT_CUTOFFS} }, 
                ALT2: { n:'Scale C', c:{...DEFAULT_CUTOFFS} } 
            };
            
            const m = localStorage.getItem('sgpaScaleMapsBySem');
            scaleMapsBySem = m ? JSON.parse(m) : { 1:{}, 2:{} };

            const manual = localStorage.getItem('sgpaManualBySem');
            manualSGPABySem = manual ? JSON.parse(manual) : { 1: '', 2: '' };
            
            SCALE_SLOTS.forEach(id => {
                const btn = document.querySelector(`.tab-button[data-scale-id="${id}"]`);
                if (btn) btn.textContent = namedScales[id].n;
            });

            document.getElementById('manual-sgpa').value = manualSGPABySem[currentSem] || '';
            document.getElementById('manual-sgpa-mobile').value = manualSGPABySem[currentSem] || '';

            showScale(currentEditingScaleId);
        }

        function showScale(id) {
            currentEditingScaleId = id;
            document.querySelectorAll('.tab-button').forEach(b => b.classList.toggle('active', b.dataset.scaleId === id));
            
            const html = Object.keys(DEFAULT_CUTOFFS).sort((a,b)=>b-a).map(p => `
                <div>
                    <label class="block text-[10px] text-gray-500 mb-1">${getGradeName(p)} (${p} Pts)</label>
                    <input type="number" class="w-full p-2 border border-gray-600 rounded text-center text-xs font-bold" 
                        value="${namedScales[id].c[p]}" 
                        oninput="updateCutoff(${p}, this.value)">
                </div>
            `).join('');
            document.getElementById('scale-inputs').innerHTML = html;
        }

        function updateCutoff(p, v) {
            namedScales[currentEditingScaleId].c[p] = parseInt(v) || 0;
            localStorage.setItem('sgpaNamedGradeScales', JSON.stringify(namedScales));
            calculateAll();
        }

        function saveManualSGPA(val, originId) {
            // Clean input: only allow numbers and one decimal point
            const cleaned = val.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');
            
            manualSGPABySem[currentSem] = cleaned;
            localStorage.setItem('sgpaManualBySem', JSON.stringify(manualSGPABySem));
            
            // Sync ONLY the other field to avoid cursor jumping
            const targetId = originId === 'manual-sgpa' ? 'manual-sgpa-mobile' : 'manual-sgpa';
            const target = document.getElementById(targetId);
            if (target) target.value = cleaned;
            
            calculateAll();
        }

        function saveCurrentScaleName() {
            const n = prompt("Enter Scale Name:", namedScales[currentEditingScaleId].n);
            if (n) {
                namedScales[currentEditingScaleId].n = n;
                localStorage.setItem('sgpaNamedGradeScales', JSON.stringify(namedScales));
                SCALE_SLOTS.forEach(id => {
                    const btn = document.querySelector(`.tab-button[data-scale-id="${id}"]`);
                    if (btn) btn.textContent = namedScales[id].n;
                });
                renderSubjectCards();
            }
        }

        function resetCurrentScale() {
            namedScales[currentEditingScaleId].c = {...DEFAULT_CUTOFFS};
            localStorage.setItem('sgpaNamedGradeScales', JSON.stringify(namedScales));
            showScale(currentEditingScaleId);
            calculateAll();
        }

        function getGradeName(p) {
            return {10:'A+', 9:'A', 8:'B+', 7:'B', 6:'C+', 5:'C', 4:'D'}[p] || 'F';
        }

        function renderSubjectCards() {
            const container = document.getElementById('subjects-container');
            const subjects = DATA_BY_SEM[currentSem] || [];
            const savedMarks = JSON.parse(localStorage.getItem(`sgpaMarks_sem${currentSem}`) || '{}');
            const semScaleMap = scaleMapsBySem[currentSem] || {};

            container.innerHTML = subjects.map(sub => {
                const subMarks = savedMarks[sub.id] || {};
                const scaleId = semScaleMap[sub.id] || 'DEFAULT';
                const opts = SCALE_SLOTS.map(sid => `<option value="${sid}" ${scaleId===sid?'selected':''}>${namedScales[sid].n}</option>`).join('');

                return `
                    <div class="subject-card p-6 rounded-xl border-l-4 ${sub.bCol}">
                        <div class="flex justify-between items-start mb-4">
                            <h2 class="text-lg font-bold ${sub.tCol}">${sub.name} <span class="text-xs opacity-60">(${sub.credits})</span></h2>
                            <select onchange="updateSubScale('${sub.id}', this.value)" class="bg-gray-700 text-[10px] border border-gray-600 rounded px-1 cursor-pointer">
                                ${opts}
                            </select>
                        </div>
                        <div class="grid grid-cols-3 gap-3">
                            ${sub.components.map(c => `
                                <div>
                                    <label class="text-[10px] text-gray-500">${c.t} (${c.m})</label>
                                    <input type="number" value="${subMarks[c.k] !== undefined ? subMarks[c.k] : ''}" 
                                        class="w-full p-2 rounded text-center text-sm font-bold" 
                                        oninput="saveMark('${sub.id}','${c.k}',this.value,${c.m})">
                                </div>
                            `).join('')}
                        </div>
                        <div class="mt-4 pt-3 border-t border-gray-700 flex justify-between items-center text-xs">
                            <span>Total: <b id="tot-${sub.id}">0</b></span>
                            <span>Grade: <b id="grd-${sub.id}" class="text-blue-400">N/A</b></span>
                        </div>
                    </div>
                `;
            }).join('');
            calculateAll();
        }

        function saveMark(subId, key, val, max) {
            const saved = JSON.parse(localStorage.getItem(`sgpaMarks_sem${currentSem}`) || '{}');
            if (val === '') {
                if(saved[subId]) delete saved[subId][key];
                if(saved[subId] && Object.keys(saved[subId]).length === 0) delete saved[subId];
            } else {
                let num = parseFloat(val);
                if (num > max) num = max;
                if (num < 0) num = 0;
                if (!saved[subId]) saved[subId] = {};
                saved[subId][key] = num;
            }
            localStorage.setItem(`sgpaMarks_sem${currentSem}`, JSON.stringify(saved));
            calculateAll();
        }

        function updateSubScale(subId, sid) {
            if (!scaleMapsBySem[currentSem]) scaleMapsBySem[currentSem] = {};
            scaleMapsBySem[currentSem][subId] = sid;
            localStorage.setItem('sgpaScaleMapsBySem', JSON.stringify(scaleMapsBySem));
            calculateAll();
        }

        function calculateAll() {
            const res = calcSem(currentSem);
            const manual = manualSGPABySem[currentSem];
            const isManual = manual !== '' && manual !== null && !isNaN(parseFloat(manual)) && !manual.endsWith('.');
            
            const sgpaDisplay = isManual ? parseFloat(manual).toFixed(2) : res.sgpa;
            document.getElementById('sgpa-result').textContent = sgpaDisplay;
            document.getElementById('sgpa-summary').textContent = getSummary(sgpaDisplay);
            document.getElementById('override-badge').classList.toggle('hidden', !isManual);

            const currentSubjects = DATA_BY_SEM[currentSem] || [];
            const savedMarks = JSON.parse(localStorage.getItem(`sgpaMarks_sem${currentSem}`) || '{}');
            const semScaleMap = scaleMapsBySem[currentSem] || {};

            currentSubjects.forEach(s => {
                const subMarks = savedMarks[s.id] || {};
                const total = Object.values(subMarks).reduce((a,b)=>a+b, 0);
                const scaleId = semScaleMap[s.id] || 'DEFAULT';
                const cutoffs = namedScales[scaleId] ? namedScales[scaleId].c : DEFAULT_CUTOFFS;
                
                let pts = 0;
                let grd = 'F';
                Object.keys(cutoffs).sort((a,b)=>b-a).forEach(p => {
                    if (total >= cutoffs[p] && pts === 0) { pts = parseInt(p); grd = getGradeName(p); }
                });

                const elT = document.getElementById(`tot-${s.id}`);
                const elG = document.getElementById(`grd-${s.id}`);
                if (elT) elT.textContent = total;
                if (elG) {
                    elG.textContent = grd;
                    elG.className = pts >= 7 ? 'text-green-400 font-bold' : pts >= 4 ? 'text-yellow-400 font-bold' : 'text-red-400 font-bold';
                }
            });

            let totalWP = 0;
            let totalC = 0;
            [1,2].forEach(sNum => {
                const sManual = manualSGPABySem[sNum];
                if (sManual !== '' && sManual !== null && !isNaN(parseFloat(sManual)) && !sManual.toString().endsWith('.')) {
                    const subjects = DATA_BY_SEM[sNum] || [];
                    const semCredits = subjects.reduce((a,b) => a + b.credits, 0);
                    totalWP += parseFloat(sManual) * semCredits;
                    totalC += semCredits;
                } else {
                    const sRes = calcSem(sNum);
                    if (sRes.tc > 0) {
                        totalWP += sRes.wp;
                        totalC += sRes.tc;
                    }
                }
            });
            const cgpaVal = totalC > 0 ? (totalWP / totalC).toFixed(2) : '0.00';
            document.getElementById('cgpa-result').textContent = cgpaVal;
            document.getElementById('cgpa-summary').textContent = getSummary(cgpaVal);
        }

        function calcSem(sNum) {
            const subjects = DATA_BY_SEM[sNum] || [];
            const marks = JSON.parse(localStorage.getItem(`sgpaMarks_sem${sNum}`) || '{}');
            const semScaleMap = scaleMapsBySem[sNum] || {};
            let wp = 0;
            let tc = 0;

            subjects.forEach(sub => {
                const subMarks = marks[sub.id];
                if (subMarks && Object.keys(subMarks).length > 0) {
                    const total = Object.values(subMarks).reduce((a,b)=>a+b,0);
                    const scaleId = semScaleMap[sub.id] || 'DEFAULT';
                    const cutoffs = namedScales[scaleId] ? namedScales[scaleId].c : DEFAULT_CUTOFFS;
                    let pts = 0;
                    Object.keys(cutoffs).sort((a,b)=>b-a).forEach(p => {
                        if (total >= cutoffs[p] && pts === 0) pts = parseInt(p);
                    });
                    wp += pts * sub.credits;
                    tc += sub.credits;
                }
            });
            return { sgpa: tc > 0 ? (wp / tc).toFixed(2) : '0.00', wp, tc };
        }

        function getSummary(v) {
            const n = parseFloat(v);
            if (n >= 9) return "Outstanding";
            if (n >= 8) return "Excellent";
            if (n >= 7) return "Good work, keep it up";
            if (n >= 6) return "Can do better, efforts required";
            if (n >= 4) return "Need to do hardwork";
            if (n > 0) return "Bad result, focus on studies";
            return "Enter marks to begin";
        }

        function toggleGradeScalePanel() {
            const p = document.getElementById('grade-scale-panel');
            const i = document.getElementById('toggle-icon-panel');
            const h = p.classList.toggle('hidden');
            i.textContent = h ? 'â–¼' : 'â–²';
        }

        window.onload = () => {
            loadStorage();
            renderSubjectCards();
        };
    </script>
</body>
</html>
</html>
